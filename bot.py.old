# import firebase_admin
# from keys.secrets import TELEGRAM_KEY, FIREBASE_URL
# from firebase_admin import credentials, db

# from telegram.ext import Application, CommandHandler, ContextTypes, MessageHandler, filters

# # Команда /start
# def start(update: Updater, context: ):
#     update.message.reply_text("""
#     ¡Hola! Soy el bot del café Sr.Papa.
    
#     Escribe tu nombre y/o apellido separados por un espacio (por ejemplo: Name: Ivan Petrov o Name: Juan).
    
#     También puedes simplemente reenviar el mensaje del bot de Tilda.
#     """)

# # Обработка текста и сохранение в Firebase
# def save_name(update: Updater, context):
#     text = update.message.text

#     # Ищем строку с именем
#     for line in text.split("\n"):
#         if line.startswith("Name:"):
#             name = line.split("Name:")[1].strip()
            
#             # Сохраняем в Firebase
#             ref = db.reference("user")
#             ref.set({
#                 "name": name
#             })
            
#             update.message.reply_text(f"✅ Nombre guardado: {name}")
#             return
    
#     # Если имя не найдено
#     update.message.reply_text('⚠️ Nombre no encontrado. Asegúrate de que el mensaje contenga una línea como: "Name: Danuil"')

# # Запуск бота
# def main():
#     # Initializing firebase
#     firebase_admin.initialize_app(
#         credentials.Certificate("keys/firebase.json"), 
#         {
#             'databaseURL': FIREBASE_URL
#         }
#     )

#     application = Application.builder().token("TOKEN").build()


#     application.add_handler(CommandHandler("start", start))

#     application.add_handler(CommandHandler("help", help_command))

#     application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, echo))


#     application.run_polling(allowed_updates=Update.ALL_TYPES)

#     tg_updater = Updater(TELEGRAM_KEY)
#     dp = updater.dispatcher

#     dp.add_handler(CommandHandler("start", start))
#     dp.add_handler(MessageHandler(save_name))

#     updater.start_polling()
#     updater.idle()

# if __name__ == "__main__":
#     main()

